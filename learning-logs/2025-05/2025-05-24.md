# Next.js App RouterでのAPIルート作成と型定義の共有 まとめ

## 1. App Router構成でのAPIエンドポイント
- APIエンドポイントは `src/app/api/xxx/route.ts` に作成する。
- `GET` や `POST` などの関数をエクスポートして、HTTPメソッドごとに処理を分ける。
- 例：
  ```ts
  // src/app/api/hello/route.ts
  import { NextResponse } from 'next/server';
  export async function GET() {
    return NextResponse.json({ message: 'Hello, API!' });
  }
  ```

## 2. 型定義の共有
- 型定義ファイル（例：`src/types/api.ts`）を作成し、APIのリクエスト・レスポンス型を定義する。
- APIルートとフロントエンド両方で同じ型をimportして使うことで、型安全な開発ができる。
- 例：
  ```ts
  // src/types/api.ts
  export type HelloResponse = { message: string };
  ```

## 3. フロントエンドからAPIを呼び出す
- fetchなどでAPIを呼び出し、型を活用して安全にデータを扱う。
- 例：
  ```ts
  import type { HelloResponse } from '@/types/api';
  async function fetchHello(): Promise<HelloResponse> {
    const res = await fetch('/api/hello');
    return res.json();
  }
  ```

## 4. フォルダ構成のポイント
- App Router構成では `pages/` ではなく `app/` ディレクトリを使う。
- APIルートは `app/api/` 配下に `route.ts` で作成する。

---

### 学びのポイント
- APIルートの作成方法がApp RouterとPages Routerで異なることを理解した。
- 型定義を共通化することで、フロントエンド・バックエンド間の型のズレを防げる。
- Next.jsの最新構成（App Router）に慣れることができた。
